\documentclass[../hydrozoa.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\chapter{L2 consensus protocol}%
\label{h:l2-consensus-protocol}

\section{Setup}%
\label{h:consensus-setup}

\subsection{Parameters}%
\label{h:consensus-parameters}

% TODO parameters for L2 consensus

% TODO ReqParams
% Alice: Let's open a head! Here are my proposed parameters.

% TODO AckParams
% Bob: Acknowledged. Here's my pubkey.
% Charlie: Acknowledged. Here's my pubkey.

\subsection{Initialization}%
\label{h:consensus-intitialization}

% TODO ReqInit
% Alice: Please sign this head initialization transaction, which uses a native script parametrized by Alice, Bob, and Charlie's provided pubkeys.

% TODO AckInit
% Bob: here's my signature.
% Charlie: here's my signature.
% (Everyone): (Submits the multisigned init transaction to Cardano)

\section{Ledger requests}%
\label{h:consensus-ledger}

\subsection{Transaction}%
\label{h:consensus-transaction}

% TODO ReqTx

\subsection{Withdrawal}%
\label{h:consensus-withdrawal}

% TODO ReqWithdrawal

\section{Consensus on blocks}%
\label{h:consensus-on-blocks}

\subsection{Minor block}%
\label{h:consensus-minor-block}

% TODO ReqMinor

% TODO AckMinor

\subsection{Major block}%
\label{h:consensus-major-block}

% TODO ReqMajor

% TODO AckMajor

\subsection{Final block}%
\label{h:consensus-final-block}

% TODO ReqFinal

% TODO AckFinal

\section{Consensus on refunds}%
\label{h:consensus-on-refunds}


\subsection{Post-dated refund}%
\label{h:consensus-post-dated-refund}

% TODO ReqRefundLater

% TODO AckRefundLater

\subsection{Immediate refund}%
\label{h:consensus-immediate-refund}

% TODO ReqRefundNow

% TODO AckRefundNow

\end{document}
