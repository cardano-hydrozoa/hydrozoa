\documentclass[../hydrozoa.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\chapter{Offchain consensus protocol}%
\label{h:offchain-consensus-protocol}

\section{Setup}%
\label{h:consensus-setup}

\subsection{Parameters}%
\label{h:consensus-parameters}

% TODO parameters for offchain consensus

% TODO ReqParams
% Alice: Let's open a head! Here are my proposed parameters.

% TODO AckParams
% Bob: Acknowledged. Here's my pubkey.
% Charlie: Acknowledged. Here's my pubkey.

\subsection{Initialization}%
\label{h:consensus-intitialization}

% TODO ReqInit
% Alice: Please sign this head initialization transaction, which uses a native script parametrized by Alice, Bob, and Charlie's provided pubkeys.

% TODO AckInit
% Bob: here's my signature.
% Charlie: here's my signature.
% (Everyone): (Submits the multisigned init transaction to Cardano)

\section{Ledger messages}%
\label{h:consensus-ledger}

\subsection{Deposit}%
\label{h:consensus-deposit}

% TODO ReqDeposit

% TODO AckDeposit

\subsection{Transaction}%
\label{h:consensus-transaction}

% TODO ReqTx

\subsection{Withdrawal}%
\label{h:consensus-withdrawal}

% TODO ReqWithdrawal

\section{Snapshot messages}%
\label{h:consensus-snapshots}

\subsection{Minor snapshot}%
\label{h:consensus-minor-snapshot}

% TODO ReqMinor

% TODO AckMinor

\subsection{Major snapshot}%
\label{h:consensus-major-snapshot}

% TODO ReqMajor

% TODO AckMajor

\subsection{Final snapshot}%
\label{h:consensus-final-snapshot}

% TODO ReqFinal

% TODO AckFinal

\end{document}
