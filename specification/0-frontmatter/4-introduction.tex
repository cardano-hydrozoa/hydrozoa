\documentclass[../hydrozoa.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\section*{Introduction}%
\label{h:introduction}
\addcontentsline{toc}{chapter}{Introduction}

% TODO update

Hydrozoa is a dynamic, near-isomorphic multi-party state channel protocol.
A Hydrozoa head's peers enjoy high throughput, instant finality, and low costs while transacting with each other.

Hydrozoa evolved out of Cardano's Hydra Head protocol \citep{NagelEtAlHydraHeadV1Specification2024}, dramatically simplifying the L1 smart contract architecture and increasing flexibility.
A Hydrozoa head remains open while its peers add or remove peers (by unanimous consensus) and deposit or withdraw funds.

Onchain, a Hydrozoa head keeps all funds and state at a multisig native script address controlled collectively by its peers.
Peers deposit funds or information into the head by sending utxos to this address,
and withdrawals are settled by multi-signed settlement transactions that send utxos out of this address.
A refund mechanism assures deposits against being stranded if consensus fails.

If peers cannot multi-sign any more transactions, Hydrozoa's state timeout mechanism transfers control over the head from the native script to a Plutus script.
The Plutus script resolves the peers' dispute by allowing each peer to submit a multi-signed ledger snapshot version, from which it selects the latest one.
With the latest snapshot established, peers can unilaterally execute their own withdrawals by interacting with the snapshot's utxo Merkle tree.

Offchain, Hydrozoa broadcasts requests among peers and generates a sequence of multi-signed snapshots.
Each snapshot is versioned and consists of a sequence of settlement transactions and a Merkle root hash of its active utxo set.
The settlement transactions recognize new deposits in the L2 state and settle withdrawals from L2 to L1.
The Merkle root hash defines the snapshot's not-yet-withdrawn L2 utxos, which can later be unilaterally withdrawn if the Plutus script selects this as the last snapshot.

As long as one of the peers is honest, the offchain protocol guarantees that a snapshot's L2 ledger state is derived by applying its events (deposits, transactions, and withdrawals) to the previous snapshot's ledger state.
It also guarantees that future snapshots never contradict a multi-signed snapshot's settlement transactions.
This makes settlement transactions deterministic and provides instant finality for a snapshot's events as soon as it is multi-signed.

Overall, a Hydrozoa Head excels at facilitating fast and frequent interactions for its peers with each other and Cardano.
Its main incentive to interoperate with other L2s is to expand its peers' reach beyond their small group and allow them to interact with large smart-contract-based applications.

% TODO Why use native scripts in multisig regime?
% - cheaper
% - Problem of single-user collateral requirement in Plutus scripts

\end{document}
